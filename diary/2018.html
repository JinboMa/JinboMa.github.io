<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Forgiver | 2018</title>
    <meta name="description" content="A front-end enginer.">
    
    
    <link rel="preload" href="/assets/css/20.styles.69a5f6a1.css" as="style"><link rel="preload" href="/assets/js/app.d06a0d45.js" as="script"><link rel="preload" href="/assets/js/14.82226d44.js" as="script"><link rel="prefetch" href="/assets/js/0.99c4d975.js"><link rel="prefetch" href="/assets/js/1.2950608b.js"><link rel="prefetch" href="/assets/js/2.84ea6ea5.js"><link rel="prefetch" href="/assets/js/3.d3e854b0.js"><link rel="prefetch" href="/assets/js/4.2481566d.js"><link rel="prefetch" href="/assets/js/5.268112aa.js"><link rel="prefetch" href="/assets/js/6.8fca78de.js"><link rel="prefetch" href="/assets/js/7.5ee5401a.js"><link rel="prefetch" href="/assets/js/8.20b7a5f2.js"><link rel="prefetch" href="/assets/js/9.78817ce4.js"><link rel="prefetch" href="/assets/js/10.668f185e.js"><link rel="prefetch" href="/assets/js/11.14ea28e1.js"><link rel="prefetch" href="/assets/js/12.dd1b3ead.js"><link rel="prefetch" href="/assets/js/13.7680e34c.js"><link rel="prefetch" href="/assets/js/15.be1899d1.js"><link rel="prefetch" href="/assets/js/16.6d43ce85.js"><link rel="prefetch" href="/assets/js/17.6185c76a.js"><link rel="prefetch" href="/assets/js/18.7f3991aa.js"><link rel="prefetch" href="/assets/js/19.0866b476.js">
    <link rel="stylesheet" href="/assets/css/20.styles.69a5f6a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      Forgiver
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/diary/" class="nav-link router-link-active">日记</a></div><div class="nav-item"><a href="/page/" class="nav-link">文章</a></div><div class="nav-item"><a href="/share/" class="nav-link">分享</a></div><a href="https://github.com/JinboMa/documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/diary/" class="nav-link router-link-active">日记</a></div><div class="nav-item"><a href="/page/" class="nav-link">文章</a></div><div class="nav-item"><a href="/share/" class="nav-link">分享</a></div><a href="https://github.com/JinboMa/documents" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>每日积累</span><!----></p><ul class="sidebar-group-items"><li><a href="/diary/" class="sidebar-link">介绍</a></li><li><a href="/diary/2018.html" class="active sidebar-link">2018</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#_2018-05-03" class="sidebar-link">2018.05.03</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#去除移动端点击事件出现的背景框" class="sidebar-link">去除移动端点击事件出现的背景框</a></li></ul></li><li class="sidebar-sub-header"><a href="/diary/2018.html#_2018-05-08" class="sidebar-link">2018.05.08</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#移动端滚动卡顿问题" class="sidebar-link">移动端滚动卡顿问题</a></li><li class="sidebar-sub-header"><a href="/diary/2018.html#postcss-二倍图插件" class="sidebar-link">postcss 二倍图插件</a></li></ul></li><li class="sidebar-sub-header"><a href="/diary/2018.html#_2018-05-14" class="sidebar-link">2018.05.14</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#eslint-node-api" class="sidebar-link">eslint node api</a></li><li class="sidebar-sub-header"><a href="/diary/2018.html#移动端-点击刺穿-touch-click" class="sidebar-link">移动端 点击刺穿(touch, click)</a></li><li class="sidebar-sub-header"><a href="/diary/2018.html#postcss-在-webpack-中的配置" class="sidebar-link">postcss 在 webpack 中的配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/diary/2018.html#_2018-05-16" class="sidebar-link">2018.05.16</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#移动端弹出框，阻止页面滚动" class="sidebar-link">移动端弹出框，阻止页面滚动</a></li></ul></li><li class="sidebar-sub-header"><a href="/diary/2018.html#_2018-05-22" class="sidebar-link">2018.05.22</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#js-animate-api" class="sidebar-link">js animate api</a></li></ul></li><li class="sidebar-sub-header"><a href="/diary/2018.html#_2018-05-23" class="sidebar-link">2018.05.23</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#使某div在滚动区域内可见" class="sidebar-link">使某div在滚动区域内可见</a></li></ul></li><li class="sidebar-sub-header"><a href="/diary/2018.html#_2018-05-30" class="sidebar-link">2018.05.30</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#css-span-换行" class="sidebar-link">css span 换行</a></li><li class="sidebar-sub-header"><a href="/diary/2018.html#git-commit-后还原到没有-commit-的状态" class="sidebar-link">git commit 后还原到没有 commit 的状态</a></li><li class="sidebar-sub-header"><a href="/diary/2018.html#图片居中的两种" class="sidebar-link">图片居中的两种</a></li></ul></li><li class="sidebar-sub-header"><a href="/diary/2018.html#_2018-06-08" class="sidebar-link">2018.06.08</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/diary/2018.html#判断手机横竖屏" class="sidebar-link">判断手机横竖屏</a></li></ul></li></ul></li><li><a href="/diary/2017.html" class="sidebar-link">2017</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="_2018"><a href="#_2018" aria-hidden="true" class="header-anchor">#</a> 2018</h1><h2 id="_2018-05-03"><a href="#_2018-05-03" aria-hidden="true" class="header-anchor">#</a> 2018.05.03</h2><h3 id="去除移动端点击事件出现的背景框"><a href="#去除移动端点击事件出现的背景框" aria-hidden="true" class="header-anchor">#</a> 去除移动端点击事件出现的背景框</h3><p>-webkit-tap-highlight-color 是一个 不规范的属性（unsupported WebKit property），它没有出现在 CSS 规范草案中。当用户点击iOS的Safari浏览器中的链接或JavaScript的可点击的元素时，覆盖显示的高亮颜色。该属性可以只设置透明度。如果未设置透明度，iOS Safari使用默认的透明度。当透明度设为 0 ，则会禁用此属性；当透明度设为 1 ，元素在点击时不可见。</p><pre class="language-css"><code><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">-webkit-tap-highlight-color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="_2018-05-08"><a href="#_2018-05-08" aria-hidden="true" class="header-anchor">#</a> 2018.05.08</h2><h3 id="移动端滚动卡顿问题"><a href="#移动端滚动卡顿问题" aria-hidden="true" class="header-anchor">#</a> 移动端滚动卡顿问题</h3><p>最近的一次开发中，使用到了overflow：scroll 属性来滑动div。
如果你对某个div或模块使用了overflow: scroll属性，在iOS系统的手机上浏览时，则会出现明显的卡顿现象。</p><p>以下代码可解决这种卡顿的问题：<code>-webkit-overflow-scrolling: touch;</code>，是因为这行代码启用了硬件加速特性，所以滑动很流畅。</p><h3 id="postcss-二倍图插件"><a href="#postcss-二倍图插件" aria-hidden="true" class="header-anchor">#</a> postcss 二倍图插件</h3><p><code>npm install postcss-at2x --save-dev</code></p><pre class="language-js"><code><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> postcss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> at2x <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-at2x'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> input <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">readFileSync</span><span class="token punctuation">(</span><span class="token string">'input.css'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> output <span class="token operator">=</span> <span class="token function">postcss</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">at2x</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>css<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><p>配置项：</p><p><code>identifier (default: '@2x') {string}</code> 设置二倍图后缀</p><p><code>detectImageSize (default: false) {boolean}</code> 自动获取一倍图的图片大小，并自动设置background-size</p><p><code>skipMissingRetina (default: false) {boolean}</code> 如果在文件夹中找不到二倍图，将跳过并不输出到css</p><p><code>resolveImagePath (default: process.cwd())</code> 自动获取图像大小所解析的目录</p><p>使用:</p><pre class="language-css"><code><span class="token selector">.icon</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url('test.png')</span> at-2x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><p>less 函数</p><pre class="language-less"><code><span class="token selector">.icon(<span class="token variable">@url</span>, <span class="token variable">@width</span>, <span class="token variable">@height</span>)</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token variable">@width</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token variable">@height</span><span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url(@url)</span> at<span class="token operator">-</span>2x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.i-close</span> <span class="token punctuation">{</span>
  <span class="token mixin-usage function">.icon</span><span class="token punctuation">(</span><span class="token string">'close.png'</span><span class="token punctuation">,</span> .28rem<span class="token punctuation">,</span> .28rem<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="_2018-05-14"><a href="#_2018-05-14" aria-hidden="true" class="header-anchor">#</a> 2018.05.14</h2><h3 id="eslint-node-api"><a href="#eslint-node-api" aria-hidden="true" class="header-anchor">#</a> eslint node api</h3><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> CLIEngine <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'eslint'</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> cli <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CLIEngine</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span>
<span class="token keyword">let</span> report <span class="token operator">=</span> cli<span class="token punctuation">.</span><span class="token function">executeOnFiles</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'src'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
fix <span class="token operator">&amp;&amp;</span> CLIEngine<span class="token punctuation">.</span><span class="token function">outputFixes</span><span class="token punctuation">(</span>report<span class="token punctuation">)</span> <span class="token comment">// eslint修复文件</span>
<span class="token keyword">let</span> isError <span class="token operator">=</span> report<span class="token punctuation">.</span>errorCount <span class="token comment">// 是否有错误</span>
<span class="token keyword">let</span> formatter <span class="token operator">=</span> cli<span class="token punctuation">.</span><span class="token function">getFormatter</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token punctuation">(</span>report<span class="token punctuation">.</span>results<span class="token punctuation">)</span> <span class="token comment">// 错误格式化</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>

<span class="token comment">// option</span>
<span class="token keyword">let</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
  cwd<span class="token punctuation">,</span> <span class="token comment">// 检测的文件所在路径</span>
  fix<span class="token punctuation">,</span> <span class="token comment">// false 是否自动修复(设置为true并不会自动修复，需要手动调用CLIEngine.outputFixes函数)</span>
  useEslintrc<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// true 是否使用eslintrc等配置文件检测，默认为true</span>
  configFile<span class="token punctuation">,</span> <span class="token comment">// 设置检测的配置文件(当useEslintrc为true或不赋值时，会自动合并配置项，冲突项使用configFile)</span>
  <span class="token comment">// 包含解析器选项的对象</span>
  parserOptions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    parser<span class="token punctuation">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'babel-eslint'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    sourceType<span class="token punctuation">:</span> <span class="token string">'module'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  extensions<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'.js'</span><span class="token punctuation">,</span> <span class="token string">'.vue'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 需要检测的文件后缀</span>
  envs<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'node'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 环境</span>
  <span class="token comment">// 自定义规则</span>
  rules<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">'vue/max-attributes-per-line'</span><span class="token punctuation">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>更多关于<a href="http://eslint.cn/docs/developer-guide/nodejs-api" target="_blank" rel="noopener noreferrer">eslint node api</a></p><h3 id="移动端-点击刺穿-touch-click"><a href="#移动端-点击刺穿-touch-click" aria-hidden="true" class="header-anchor">#</a> 移动端 点击刺穿(touch, click)</h3><p>背景：在移动端坚听点击事件时，可以使用 <code>click/touchstart/touchend</code></p><p>触发：当使用 <code>touchstart/touchend</code> 与 <code>click</code> 混合使用时，将造成<code>点击刺穿</code>问题</p><p>原因：因为pc端事件( click 等事件)相对于移动端事件有 <code>300ms</code> 的延迟</p><p>当在一个页面触发某元素的 <code>touch</code> 相关事件时，跳转到另一页面触发了同一位置且绑定了 <code>click</code> 事件的元素的 <code>click</code> 事件</p><p>解决：以下示例为在vue中示例</p><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span>
  <span class="token attr-name">@touchstart</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onTouchStart<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@touchmove</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onTouchMove<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">@touchend</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>onTouchEnd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><pre class="language-js"><code><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    isClick<span class="token punctuation">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">onClick</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// click todo</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onTouchStart</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isClick <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onTouchEnd</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isClick<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">onTouchMove</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isClick <span class="token operator">=</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="postcss-在-webpack-中的配置"><a href="#postcss-在-webpack-中的配置" aria-hidden="true" class="header-anchor">#</a> postcss 在 webpack 中的配置</h3><pre class="language-js"><code><span class="token keyword">var</span> ExtractTextPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;extract-text-webpack-plugin&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> webpackConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  module<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    rules<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        test<span class="token punctuation">:</span> <span class="token regex">/\.(css|less)$/</span><span class="token punctuation">,</span>
        use<span class="token punctuation">:</span> ExtractTextPlugin<span class="token punctuation">.</span><span class="token function">extract</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          fallback<span class="token punctuation">:</span> <span class="token string">'style-loader'</span><span class="token punctuation">,</span>
          use<span class="token punctuation">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
              loader<span class="token punctuation">:</span> <span class="token string">'css-loader?-autoprefixer'</span><span class="token punctuation">,</span>
              options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
                importLoaders<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'postcss-loader'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> loader<span class="token punctuation">:</span> <span class="token string">'less-loader'</span> <span class="token punctuation">}</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><p>postcss.config.js</p><pre class="language-js"><code><span class="token keyword">var</span> postcss <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss'</span><span class="token punctuation">)</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  modules<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-at2x'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-adaptive'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      remUnit<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      autoRem<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-sprites'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string">'stylesheetPath'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token string">'spritePath'</span><span class="token punctuation">:</span> <span class="token string">'../dist/images/'</span><span class="token punctuation">,</span>
      <span class="token string">'retina'</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token string">'groupBy'</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>image<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">/* eslint no-unused-vars:off */</span>
        <span class="token keyword">let</span> <span class="token punctuation">[</span>str<span class="token punctuation">,</span> name<span class="token punctuation">]</span> <span class="token operator">=</span> image<span class="token punctuation">.</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/static\/images\/sprite\/(.*)\//</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'Not a sprite image.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      hooks<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        onUpdateRule<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>rule<span class="token punctuation">,</span> token<span class="token punctuation">,</span> image<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">var</span> backgroundSizeX <span class="token operator">=</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>spriteWidth <span class="token operator">/</span> image<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>
          <span class="token keyword">var</span> backgroundSizeY <span class="token operator">=</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>spriteHeight <span class="token operator">/</span> image<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>
          <span class="token keyword">var</span> backgroundPositionX <span class="token operator">=</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>x <span class="token operator">/</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>spriteWidth <span class="token operator">-</span> image<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>
          <span class="token keyword">var</span> backgroundPositionY <span class="token operator">=</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>y <span class="token operator">/</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>spriteHeight <span class="token operator">-</span> image<span class="token punctuation">.</span>coords<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span>

          backgroundSizeX <span class="token operator">=</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>backgroundSizeX<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> backgroundSizeX
          backgroundSizeY <span class="token operator">=</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>backgroundSizeY<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> backgroundSizeY
          backgroundPositionX <span class="token operator">=</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>backgroundPositionX<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> backgroundPositionX
          backgroundPositionY <span class="token operator">=</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>backgroundPositionY<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token punctuation">:</span> backgroundPositionY

          <span class="token keyword">var</span> backgroundImage <span class="token operator">=</span> postcss<span class="token punctuation">.</span><span class="token function">decl</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            prop<span class="token punctuation">:</span> <span class="token string">'background-image'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> <span class="token string">'url('</span> <span class="token operator">+</span> image<span class="token punctuation">.</span>spriteUrl <span class="token operator">+</span> <span class="token string">')'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>

          <span class="token keyword">var</span> backgroundSize <span class="token operator">=</span> postcss<span class="token punctuation">.</span><span class="token function">decl</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            prop<span class="token punctuation">:</span> <span class="token string">'background-size'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> backgroundSizeX <span class="token operator">+</span> <span class="token string">'% '</span> <span class="token operator">+</span> backgroundSizeY <span class="token operator">+</span> <span class="token string">'%'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>

          <span class="token keyword">var</span> backgroundPosition <span class="token operator">=</span> postcss<span class="token punctuation">.</span><span class="token function">decl</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            prop<span class="token punctuation">:</span> <span class="token string">'background-position'</span><span class="token punctuation">,</span>
            value<span class="token punctuation">:</span> backgroundPositionX <span class="token operator">+</span> <span class="token string">'% '</span> <span class="token operator">+</span> backgroundPositionY <span class="token operator">+</span> <span class="token string">'%'</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>

          rule<span class="token punctuation">.</span><span class="token function">insertAfter</span><span class="token punctuation">(</span>token<span class="token punctuation">,</span> backgroundImage<span class="token punctuation">)</span>
          rule<span class="token punctuation">.</span><span class="token function">insertAfter</span><span class="token punctuation">(</span>backgroundImage<span class="token punctuation">,</span> backgroundPosition<span class="token punctuation">)</span>
          rule<span class="token punctuation">.</span><span class="token function">insertAfter</span><span class="token punctuation">(</span>backgroundPosition<span class="token punctuation">,</span> backgroundSize<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      spritesmith<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        padding<span class="token punctuation">:</span> <span class="token number">5</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>

</code></pre><h2 id="_2018-05-16"><a href="#_2018-05-16" aria-hidden="true" class="header-anchor">#</a> 2018.05.16</h2><h3 id="移动端弹出框，阻止页面滚动"><a href="#移动端弹出框，阻止页面滚动" aria-hidden="true" class="header-anchor">#</a> 移动端弹出框，阻止页面滚动</h3><pre class="language-js"><code><span class="token function">created</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">'hidden'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'touchmove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">beforeDestroy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>overflow <span class="token operator">=</span> <span class="token string">'auto'</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="_2018-05-22"><a href="#_2018-05-22" aria-hidden="true" class="header-anchor">#</a> 2018.05.22</h2><h3 id="js-animate-api"><a href="#js-animate-api" aria-hidden="true" class="header-anchor">#</a> js animate api</h3><pre class="language-js"><code><span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'selector'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> keyFrames <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token string">'0px'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token string">'1000px'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> left<span class="token punctuation">:</span> <span class="token string">'5000px'</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
<span class="token keyword">let</span> option <span class="token operator">=</span> <span class="token punctuation">{</span>
  duration<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token comment">// 毫秒</span>
  easing<span class="token punctuation">:</span> <span class="token string">'linear'</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> animate <span class="token operator">=</span> el<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span>keyFrames<span class="token punctuation">,</span> option<span class="token punctuation">)</span>
</code></pre><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Animations_API/Using_the_Web_Animations_API" target="_blank" rel="noopener noreferrer">Using the Web Animations API</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Animation" target="_blank" rel="noopener noreferrer">Animation</a></p><h2 id="_2018-05-23"><a href="#_2018-05-23" aria-hidden="true" class="header-anchor">#</a> 2018.05.23</h2><h3 id="使某div在滚动区域内可见"><a href="#使某div在滚动区域内可见" aria-hidden="true" class="header-anchor">#</a> 使某div在滚动区域内可见</h3><pre class="language-js"><code><span class="token keyword">let</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.el'</span><span class="token punctuation">)</span>
el<span class="token punctuation">.</span><span class="token function">scrollIntoView</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 下面方法更好用！！！</span>
el<span class="token punctuation">.</span><span class="token function">scrollIntoViewIfNeeded</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><h2 id="_2018-05-30"><a href="#_2018-05-30" aria-hidden="true" class="header-anchor">#</a> 2018.05.30</h2><h3 id="css-span-换行"><a href="#css-span-换行" aria-hidden="true" class="header-anchor">#</a> css span 换行</h3><pre class="language-css"><code><span class="token selector">.example</span> <span class="token punctuation">{</span>
  <span class="token property">overflow-wrap</span><span class="token punctuation">:</span> break-word<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><h3 id="git-commit-后还原到没有-commit-的状态"><a href="#git-commit-后还原到没有-commit-的状态" aria-hidden="true" class="header-anchor">#</a> git commit 后还原到没有 commit 的状态</h3><pre class="language-bash"><code><span class="token function">git</span> log <span class="token comment"># 找到对应 commit 的 id</span>

<span class="token function">git</span> reset --soft commitId
</code></pre><h3 id="图片居中的两种"><a href="#图片居中的两种" aria-hidden="true" class="header-anchor">#</a> 图片居中的两种</h3><pre class="language-css"><code><span class="token selector">.picture</span> <span class="token punctuation">{</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url">url('url')</span><span class="token punctuation">;</span>
  <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
  <span class="token property">background-position</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
  <span class="token property">background-repeat</span><span class="token punctuation">:</span> no-repeat<span class="token selector">;
  &amp;.cover</span> <span class="token punctuation">{</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;.contain</span> <span class="token punctuation">{</span>
    <span class="token property">background-size</span><span class="token punctuation">:</span> contain<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><h2 id="_2018-06-08"><a href="#_2018-06-08" aria-hidden="true" class="header-anchor">#</a> 2018.06.08</h2><h3 id="判断手机横竖屏"><a href="#判断手机横竖屏" aria-hidden="true" class="header-anchor">#</a> 判断手机横竖屏</h3><pre class="language-js"><code><span class="token keyword">let</span> mql <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">'(orientation: portrait)'</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">onMatchMeidaChange</span><span class="token punctuation">(</span>mql<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>mql<span class="token punctuation">.</span>matches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 竖屏</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// 横屏</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">onMatchMeidaChange</span><span class="token punctuation">(</span>mql<span class="token punctuation">)</span>
mql<span class="token punctuation">.</span><span class="token function">addListener</span><span class="token punctuation">(</span>onMatchMeidaChange<span class="token punctuation">)</span>
</code></pre><p><a href="https://aotu.io/notes/2017/01/31/detect-orientation/index.html" target="_blank" rel="noopener noreferrer">参考链接</a></p></div><div class="content edit-link"><a href="https://github.com/JinboMa/documents/edit/master/docs/diary/2018.md" target="_blank" rel="noopener noreferrer">在github上编辑本页</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/diary/" class="prev router-link-active">
          介绍
        </a></span><span class="next"><a href="/diary/2017.html">
          2017
        </a> →
      </span></p></div></div></div></div>
    <script src="/assets/js/14.82226d44.js" defer></script><script src="/assets/js/app.d06a0d45.js" defer></script>
  </body>
</html>
